<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Breaking Pills: An Intuition - Blog</title><link rel=icon type=image/png href=img/favicon.ico><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="I tried to find a simple solution to a simple math problem."><meta property="og:image" content><meta property="og:url" content="https://kevinkle.in/posts/2019-09-23-breaking_pills/"><meta property="og:site_name" content="Blog"><meta property="og:title" content="Breaking Pills: An Intuition"><meta property="og:description" content="I tried to find a simple solution to a simple math problem."><meta property="og:locale" content="en_us"><meta property="og:type" content="article"><meta property="article:section" content="posts"><meta property="article:published_time" content="2019-09-23T09:38:07+02:00"><meta property="article:modified_time" content="2019-09-23T09:38:07+02:00"><meta property="article:tag" content="Math"><meta name=twitter:card content="summary"><meta name=twitter:title content="Breaking Pills: An Intuition"><meta name=twitter:description content="I tried to find a simple solution to a simple math problem."><script src=https://kevinkle.in/js/feather.min.js></script><link href=https://kevinkle.in/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://kevinkle.in/css/main.3a1de2917438aeff713f11261cc8e65bc6d4705113bc0ef12e161e5731d820b5.css></head><body><div class=content><header><div class=main><a href=https://kevinkle.in/>Blog</a></div><nav><a href=/about>Hello</a>
<a href=/tags>Tags</a>
<a href=/projects>Projects</a>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css integrity=sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X crossorigin=anonymous><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.js integrity=sha384-g7c+Jr9ZivxKLnZTDUhnkOnsh30B4H0rpLUpJ4jAIKs4fnJI+sEnkvrMWph2EDg4 crossorigin=anonymous></script><script defer src=https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/contrib/auto-render.min.js integrity=sha384-mll67QQFJfxn0IYznZYonOWZ644AWYC+Pt2cHqMaRhXVrursRwvLnLaebdGIlYNa crossorigin=anonymous onload=renderMathInElement(document.body)></script><script>document.addEventListener("DOMContentLoaded",function(){renderMathInElement(document.body,{delimiters:[{left:"$$",right:"$$",display:!0},{left:"$",right:"$",display:!1}]})})</script></nav></header><main><article><div class=title><h1 class=title>Breaking Pills: An Intuition</h1><div class=meta>Posted on Sep 23, 2019</div></div><section class=body><h3 id=motivation>Motivation</h3><p>Recently, Mark Dominus&rsquo; <a href=https://blog.plover.com/math/breaking-pills.html>post on breaking pills</a> appeared on <a href="https://news.ycombinator.com/item?id=21024224">Hacker News</a>. I was surprised to see the author not provide a closed-form and wanted to extend on some of the comments indicating a relation to the <a href=https://en.wikipedia.org/wiki/Harmonic_number>harmonic numbers</a>.</p><h3 id=problem-formulation>Problem Formulation</h3><p>Starting off with a bowl of \(n\) whole pills, you draw from the bowl uniformly at random according to the following mechanism: if the drawn pill is whole, you put back one half of it; if the drawn pill is half, you don&rsquo;t put back anything.</p><p><strong>How many half pills will be left in the bowl once there are no more whole pills?</strong></p><h3 id=solution>Solution</h3><p>Let us first state some useful observations:</p><ul><li>Every whole pill will be drawn eventually and sequentially. We can hence assume an order on the whole pills, wlog.</li><li>Every whole pill can be associated with exactly one half pill that will be put back into the bowl. Moreover, every half pill has to be associated with exactly one whole pill, i.e. it is a 1-to-1 mapping.</li><li>Instead of asking the more general question of &lsquo;How many half pills will be left?&rsquo; we can ask the more specific question of &lsquo;For how many whole pills, does the associated half pill remain in the bowl?&rsquo;.</li><li>For such a half pill to remain in the bowl, it has to be picked <em>after</em> (or not at all, depending on how you phrase the problem) all remaining whole pills.</li></ul><p>For the sake of concreteness, let us illustrate the mechanism with \(n=7\). Recalling that we can impose an order on whole pills, we look into the third whole pill W3 and the half pill h3 associated with it. More precisely, we look into h3&rsquo;s position relative to all remaining whole pills. We can safely forget about the previous whole pills. These are the possible positions:</p><p>W3 | h3 | W4 | W5 | W6 | W7
W3 | W4 | h3 | W4 | W6 | W7
W3 | W4 | W5 | h3 | W6 | W7
W3 | W4 | W5 | W6 | h3 | W7
W3 | W4 | W5 | W6 | W7 | h3</p><p>Note that only in the last scenario, does the half pill add to the count of half pills remaining after all whole pills. Hence, in expectation, the half pill associated with the first whole pill adds \(\frac{1}{5}\) to the count of remaining half pills.</p><p>This ordering argument can be applied to all subsequent (as well as previous) whole pills: just with fewer (or more) whole pills to position. The last pill, representing the base case, will always add 1 half pill to the counter as there is only one position to choose from.</p><p>Applying our observation to all of the \(n\) whole pills we obtain:</p><p>\[\begin{aligned}
N_n &= \text{\#half pills left after the draw of } n \text{ whole pills} \\
\mathbb{E}[N_n] &= \sum_{i \in [n]} \Pr[\text{half pill from } i \text{th whole pill remains until the end}] \\
&= \sum_{i \in [n]} \Pr[i\text{th half pill is positioned after remaining whole pills } i + 1, i+2, \dots n] \\
&= \sum_{i \in [n]} \Pr[i\text{th half pill is positioned at last of } i \text{ positions}] \\
&= \sum_{i \in [n]} \frac{1}{i} \\
&= H_n
\end{aligned}\]</p><p>In case such a (hopefully) intuitive reasoning still seems unsatisfactory, note that the given argument can easily be applied in a more explicit proof by induction.</p><h3 id=closing-remarks>Closing remarks</h3><p>Recall that the harmonic number can be very well approximated by the natural logarithm. In particular, we have \(H_n = \Theta(\log(n))\) and \(\gamma + \log(n) &lt; H_n &lt; \gamma + \log(n+1)\), where \(\gamma \approx .577\) is the <a href=https://en.wikipedia.org/wiki/Euler%E2%80%93Mascheroni_constant>Euler-Mascheroni constant</a>.</p><p><img src=/imgs/Hn.png alt=hn></p><p>Thanks to Philip for bringing this problem to my attention.</p></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/math>math</a></li></ul></nav></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/kklein title=GitHub><i data-feather=github></i></a><a class=soc href=https://twitter.com/kevkle title=Twitter><i data-feather=twitter></i></a></div><div class=footer-info>2024 Â© Kevin Klein |</div></footer><script>feather.replace()</script></div></body></html>