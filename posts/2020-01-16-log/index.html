<!doctype html><html><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><title>Log, Right? - Blog</title><link rel=icon type=image/png href=img/favicon.ico><meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Naming things remains hard."><meta property="og:image" content><meta property="og:title" content="Log, Right?"><meta property="og:description" content="Naming things remains hard."><meta property="og:type" content="article"><meta property="og:url" content="https://kevinkle.in/posts/2020-01-16-log/"><meta property="article:section" content="posts"><meta property="article:published_time" content="2020-01-16T19:38:07+02:00"><meta property="article:modified_time" content="2020-01-16T19:38:07+02:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="Log, Right?"><meta name=twitter:description content="Naming things remains hard."><script src=https://kevinkle.in/js/feather.min.js></script><link href=https://kevinkle.in/css/fonts.b685ac6f654695232de7b82a9143a46f9e049c8e3af3a21d9737b01f4be211d1.css rel=stylesheet><link rel=stylesheet type=text/css media=screen href=https://kevinkle.in/css/main.3a1de2917438aeff713f11261cc8e65bc6d4705113bc0ef12e161e5731d820b5.css></head><body><div class=content><header><div class=main><a href=https://kevinkle.in/>Blog</a></div><nav><a href=/about>Hello</a>
<a href=/tags>Tags</a>
<a href=/projects>Projects</a></nav></header><main><article><div class=title><h1 class=title>Log, Right?</h1><div class=meta>Posted on Jan 16, 2020</div></div><section class=body><p>Most Machine Learning projects have seen me write a function to log data to a log-file as well as apply a logarithm to a vector. As I&rsquo;m not aware of a conventionally used synonym for the former use of &rsquo;log&rsquo; and the latter is usually referred to as &rsquo;log&rsquo; in mathematics (thereby rejecting the argument I would usually bring up in naming issues: avoid abbreviations and acronyms) a naming problem naturally arises. What&rsquo;s <code>log</code>?</p><p>So let&rsquo;s take a step back and formalize our desires from naming.</p><h2 id=goals>Goals</h2><ol><li>Given the semantics of a function, the origin of its name should be comprehensible.</li><li>Given only a function name, the rough semantics should be clear.</li><li>Given the semantics of a function, the function should be named after the first name the user would associate with the semantics. <a href=#f0>[0]</a></li></ol><p>The first goal should be self-evident and be realized by any thinkable suggestion. While achieving the latter goal might be the pinnacle of interface design, I&rsquo;m afraid it is unreachable in this context. Many people will just want to give the operation they have in mind the name <code>log</code> - a naming conflict. Hence we will evaluate options by whether they manage to realize the second goal.</p><h2 id=options>Options</h2><p>For the sake of concreteness, let&rsquo;s define both semantics:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>fn1</span>(data):
</span></span><span style=display:flex><span>	log_writer <span style=color:#f92672>=</span> LogWriter(<span style=color:#e6db74>&#39;log.csv&#39;</span>)
</span></span><span style=display:flex><span>	log_writer<span style=color:#f92672>.</span>write(data)
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>fn2</span>(x):
</span></span><span style=display:flex><span>	<span style=color:#66d9ef>return</span> np<span style=color:#f92672>.</span>log(x)
</span></span></code></pre></div><h3 id=option-1-log-logarithmizeconvert_to_log>Option 1: log, logarithmize/convert_to_log,</h3><ul><li>Cumbersome</li><li>Doesn&rsquo;t solve goal 2</li><li>Possible hit, possibly confusion wrt goal 3</li></ul><h3 id=option-2-write_to_log-log>Option 2: write_to_log, log</h3><p>Trade-off equal (resp. symmetric) to option 1.</p><h3 id=option-2-write_to_log-convert_to_log>Option 2: write_to_log, convert_to_log</h3><ul><li>Double cumbersome</li><li>Solves goal 2</li><li>No hit and no confusion wrt goal 3</li></ul><p>After many late-night executive decisions to go with either option 1 or 2 for no reason but tiredness I will from now on side with option 3.</p><h2 id=addendum-1-type-signatures-might-help-by-hinting-at-the-problem-but-dont-solve-the-problem>Addendum 1: Type signatures might help by hinting at the problem, but don&rsquo;t solve the problem.</h2><p>Type hints, both with respect to function parameters as well as return values, in combination with some IDE or editor features parsing function signatures, might provide a lot of ease and value to the user. More precisely, they can protect against overconfidence purely derived from the name of a function. E.g. a user looking for a mathematical log, finding out about the existence of a function called <code>log</code> might blindly trust that it applies the mathematical log. With the following definition:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-python data-lang=python><span style=display:flex><span><span style=color:#f92672>import</span> numpy <span style=color:#66d9ef>as</span> np
</span></span><span style=display:flex><span><span style=color:#f92672>from</span> nptyping <span style=color:#f92672>import</span> Array
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>def</span> <span style=color:#a6e22e>log</span>(x: Array[float]) <span style=color:#f92672>-&gt;</span> <span style=color:#66d9ef>None</span>:
</span></span><span style=display:flex><span>	filename <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;log.csv&#39;</span>
</span></span><span style=display:flex><span>    	<span style=color:#66d9ef>with</span> open(filename, mode<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;a+&#39;</span>) <span style=color:#66d9ef>as</span> log_file:
</span></span><span style=display:flex><span>        	log_writer <span style=color:#f92672>=</span> csv<span style=color:#f92672>.</span>writer(log_file, delimiter<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;|&#39;</span>, quotechar<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;&#39;</span>,
</span></span><span style=display:flex><span>                                	quoting<span style=color:#f92672>=</span>csv<span style=color:#f92672>.</span>QUOTE_NONE, escapechar<span style=color:#f92672>=</span><span style=color:#e6db74>&#39;</span><span style=color:#ae81ff>\\</span><span style=color:#e6db74>&#39;</span>)
</span></span><span style=display:flex><span>        	log_writer<span style=color:#f92672>.</span>writerow(data)
</span></span></code></pre></div><p>the existence of a problem would <em>usually</em> become apparent. Note that only usually, as a user would, as I see it, <em>usually</em> expect a copy of the array to be returned. In case the user assumes an in-place/by reference update, it doesn&rsquo;t help at all. Moreover, it is not constructive in avoiding the problem.</p><h2 id=addendum-2-offloading-responsibility-from-naming-to-commenting>Addendum 2: Offloading responsibility from naming to commenting.</h2><p>While this could under some circumstances be a useful addition, I have two problems with this.</p><ol><li>I try to respect the general approach of using comments to describe <em>how</em> I&rsquo;m doing things. I intend to clarify the <em>what</em> via naming.</li><li>This alone only fulfills goal 2 under the assumption that users <em>always</em> read function signatures before usage.</li></ol><h2 id=addendum-3-why-bother>Addendum 3: Why bother?</h2><p>Naturally, I&rsquo;d ask myself the question: Why bother with all of this naming?
It is not perfectly clear that it is <em>worth</em> the effort. What is clear is that there is upside to it.</p><ol><li>In general, knowing that a cost will have to be paid, it is a good idea to pay it upfront to a time of my choice than having to do it on-demand. Expense increases with the lack of flexibility.</li><li>It seems to me that such structural, engineering practices vehemently rely on consistency. Both users and I only truly start profiting from such upsides if we all have the feeling that they hold at least &lsquo;almost all of the time&rsquo;<a href=#f1>[1]</a>.</li><li>Moreover, I like to think of this thought process as practice. I will face very similar decisions time and time again and thinking about them earlier will make it easier to make good calls later.</li></ol><p>[0] Note that there is another possible distinction to be made here: It can easily be argued that not having a &lsquo;hit&rsquo; is way superior to having a &lsquo;hit&rsquo; with semantics differing from expectation. <a href=#a0>↩</a></p><p>[1] Think of a sigmoid function. Perceived value = sigmoid(likelihood of success of intuition) with a vertical inflection point<a href=#f2>[2]</a> somewhere between 0.9 and 1.<a href=#a1>↩</a></p><p>[2] I think inflection points are &lsquo;horizontal&rsquo; by definition, please forgive the abuse of terminology. :) <a href=#a2>↩</a></p></section><div class=post-tags><nav class="nav tags"><ul class=tags><li><a href=/tags/tech>tech</a></li></ul></nav></div></article></main><footer><div style=display:flex><a class=soc href=https://github.com/kklein title=GitHub><i data-feather=github></i></a><a class=soc href=https://twitter.com/kevkle title=Twitter><i data-feather=twitter></i></a></div><div class=footer-info>2024 © Kevin Klein |</div></footer><script>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","G-SGRSG6Y0WX","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script><script>feather.replace()</script></div></body></html>